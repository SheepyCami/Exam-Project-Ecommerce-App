<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Header</title>
    <link rel="stylesheet" href="/stylesheets/style.css" />

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
      rel="stylesheet"
    />
  </head>
  <body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
      <div class="container-fluid">
        <!-- Logo -->
        <a class="navbar-brand" href="/">
          <img
            src="/images/noroff_logo.png"
            alt="Noroff Logo"
            width="40"
            height="40"
          />
        </a>

         <!-- Welcome Message (Next to Search Bar) -->
         <div class="d-flex align-items-center ms-auto">
          <% if (user.RoleId === 1) { %>
            <span class="navbar-text me-3 fw-bold">Welcome, Admin</span>
          <% } else if (user.RoleId === 2) { %>
            <span class="navbar-text me-3 fw-bold">Welcome, <%= user.username %></span>
          <% } else { %>
            <span class="navbar-text me-3 fw-bold">Welcome, Guest</span>
          <% } %>
        </div>

<!-- Search Bar and Buttons -->
<div class="d-flex align-items-center" id="search-container">
  <!-- Product Name Search -->
  <input type="text" class="form-control me-2 custom-search-input" id="productName" placeholder="Enter product name, category, or brand" />
  
  <!-- Search Button -->
  <button class="btn btn-primary me-2" id="searchButton">
    <i class="bi bi-search"></i> Search
  </button>
  <!-- Clear Button -->
  <button class="btn btn-warning me-2" id="clearButton">
    <i class="bi bi-eraser-fill"></i> Clear
  </button>
</div>

        <!-- Buttons in the Header Based on Role -->
        <div class="d-flex align-items-center">
        <!-- User Buttons -->
<% if (user && user.RoleId === 1) { %>
  <!-- Admin Buttons -->
  <a href="/" class="btn btn-outline-primary me-2">
    <i class="fa fa-home"></i> Home
  </a>
  <a href="/admin/dashboard" class="btn btn-outline-secondary me-2">
    <i class="fa fa-tachometer-alt"></i> Dashboard
  </a>
  <a href="/auth/logout" class="btn btn-outline-danger">
    <i class="fa fa-sign-out-alt"></i> Logout
  </a>
<% } else if (user && user.RoleId === 2) { %>
  <!-- User Buttons -->
  <a href="/" class="btn btn-outline-primary me-2">
    <i class="fa fa-home"></i> Home
  </a>
  <a href="users/mypage" class="btn btn-outline-success me-2">
    <i class="fa fa-user"></i> My page
  </a>
  <!-- Cart Button -->
  <a href="/cart" class="btn btn-outline-dark">
    <i class="fa fa-shopping-cart"></i> Cart (<span id="cart-count">0</span>)
  </a>
  <a href="/orders" class="btn btn-outline-info me-2">
    <i class="fa fa-box"></i> My Orders
  </a>
  <a href="/auth/logout" class="btn btn-outline-danger">
    <i class="fa fa-sign-out-alt"></i> Logout
  </a>
<% } else { %>
  <!-- Guest Buttons -->
  <a href="/" class="btn btn-outline-primary me-2">
    <i class="fa fa-home"></i> Home
  </a>
  <a href="/auth/register" class="btn btn-outline-success me-2">
    <i class="fa fa-user-plus"></i> Register
  </a>
  <a href="/auth/login" class="btn btn-outline-primary">
    <i class="fa fa-sign-in-alt"></i> Login
  </a>
<% } %>

        </div>
      </div>
    </nav>


    <!-- Script to Search -->

    <script src="/javascripts/search.js"></script>
    </script>

    <!-- Bootstrap JS Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script
      src="https://kit.fontawesome.com/cfe2ac77ab.js"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
